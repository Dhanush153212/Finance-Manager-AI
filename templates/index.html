<!DOCTYPE html>
<html>
<head>
    <script src=""https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Finance Manager</title>
    <link rel="stylesheet" href="{{url_for('static',filename='style.css')}}">
</head>
<body>
    {% if warnings %}
    <div style="color: red;">
        {% for w in warnings %}
            <p>⚠️ {{ w }}</p>
        {% endfor %}
    </div>
{% endif %}
<div class="container"></div></body>
<div class="summary">
<h2>Spending Summary</h2>
{% if advice %}
    <div class="advice">{{ advice }}</div>
{% endif %}

<table>  <!-- replaces ul -->
    ...
</table>
<canvas id"spendingChart"></canvas>
<div class="total">Total Spent: ₹{{ total }}</div>
<h3>Category-wise spending</h3>
</ul>
{% for category, amount in data %}
<li>{{category}} : ₹{{amount}}</li>
{% endfor %}
</ul>
<hr>
 
<form action="/add" method="post">
    Amount:
    <input type="number" name="amount" required>
    <br><br>

    Category:
    <select name="category">
        <option>Food</option>
        <option>Travel</option>
        <option>Shopping</option>
        <option>Investment</option>
    </select>
    <br><br>
<label>Date:</label>
<input type="date" name="date" required>
    <button type="submit">Add Expense</button>
</form>
<hr>

<h3>Set Monthly Budget</h3>
<h3>Edit Expense</h3>
<form action="/edit" method="post">
    <input type="number" name="id" placeholder="Expense ID" required>
    <input type="number" name="amount" placeholder="New Amount" required>
    <input type="text" name="category" placeholder="New Category" required>
    <button type="submit">Update</button>
</form>

<h3>Delete Expense</h3>
<form action="/delete" method="post">
    <input type="number" name="id" placeholder="Expense ID" required>
    <button type="submit">Delete</button>
</form>

<form action="/set-budget" method="post">
    <input type="text" name="category" placeholder="Category (food, rent)" required>
    <input type="number" name="budget_limit" placeholder="Budget Amount" required>
    <button type="submit">Save Budget</button>
</form>
<script>
    const labels = [
        {% for category, total in data %}
            "{{ category }}",
        {% endfor %}
    ];

    const values = [
        {% for category, total in data %}
            {{ total }},
        {% endfor %}
    ];

    new Chart(document.getElementById("spendingChart"), {
        type: "bar",
        data: {
            labels: labels,
            datasets: [{
                label: "Spending by Category",
                data: values
            }]
        }
    });
</script>
<script>
    const labels = [
        {% for category, total in data %}
            "{{ category }}",
        {% endfor %}
    ];

    const values = [
        {% for category, total in data %}
            {{ total }},
        {% endfor %}
    ];

    new Chart(document.getElementById("spendingChart"), {
        type: "bar",
        data: {
            labels: labels,
            datasets: [{
                label: "Amount Spent",
                data: values,
                backgroundColor: "#007bff"
            }]
        }
    });
</script>
<script>
    const labels = [
        {% for category, total in data %}
            "{{ category }}",
        {% endfor %}
    ];

    const values = [
        {% for category, total in data %}
            {{ total }},
        {% endfor %}
    ];

    new Chart(document.getElementById("spendingChart"), {
        type: "bar",
        data: {
            labels: labels,
            datasets: [{
                label: "Amount Spent",
                data: values,
                backgroundColor: "#007bff"
            }]
        }
    });
</script>
</body>
</html>